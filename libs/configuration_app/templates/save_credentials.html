{% extends 'layout.html' %} {% block header %}
<script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/bootstrap.min.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='stylesheets/app.css') }}">

{% endblock %} {% block body %}
<div id="saveCredentialsOutput">
    <p>Wifi connection configured for:</p>
    <span class="saveCredentialsSSID">{{ ssid }}</span>
    <div><label for="info">{{ info }}</label></div>
    <form action="{{ url_for('actuator_control') }}" method=post>

        <label for="chkControl">
       Do you want to set up the AstroPlant actuators?    <input type="checkbox" id="chkControl" name="chkControl"/>
        </label>
        <hr />

        <div id="dvActuator" class="container-fluid" >
            <sub>Please select default on all GPIO settings unless you own a development board. <br> Moreover it is generally recommended to set the LED intensity below 20% due to the high power of the LEDs panel.<br>
                For the sensor fan, the preferred setting is on all the time. This is achieved by setting the same time for on an off.</sub>
            <hr>
            Select your area:
            <div class="row">
                <div class="col-sm-12">
                    <select id="first-choice" name="area">
                        <option selected value="base">Please Select</option>
                        <option value="Africa">Africa</option>
                        <option value="Antarctica">Antarctica</option>
                        <option value="America">America</option>
                        <option value="Atlantic">Atlantic</option>
                        <option value="Asia">Asia</option>
                        <option value="Australia">Australia</option>
                        <option value="Europe">Europe</option>
                        <option value="Indian">Indian</option>
                        <option value="Pacific">Pacific</option>
                    </select>
                </div>
            </div>
            Select your Location
            <div class="row">
                <div class="col-sm-12">
                    <select id="second-choice" name="location">
                        <option></option>
                    </select>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-sm-6">
                    <h4>  Fans GPIO:</h4>

                    <select id="fans_gpio" name="fans_gpio">
                        <option value="16">16 (default)</option>
                        <option value="old">20&21 (dev)</option>
                    </select>
                </div>
                <div class="col-sm-2">
                      &nbsp;ON
                    <input type="time" id="fans_time_on" name="fans_time_on" step="3600" value="06:00"> OFF:
                    <input type="time" id="fans_time_off" name="fans_time_off" step="3600" value="20:00">
                </div>
                <hr>
            </div>
            <hr>
            <div class="row">
                <div class="col-sm-6">
                    <h4>  Sensor Fan GPIO:</h4>

                    <select id="sensor_fans_gpio" name="sensor_fans_gpio">
                        <option value="19">19 (default)</option>
                        <option value="old">none (dev)</option>
                    </select>
                </div>
                <div class="col-sm-2">
                      &nbsp;ON
                    <input type="time" id="sensor_fans_time_on" name="sensor_fans_time_on" step="3600" value="06:00"> OFF:
                    <input type="time" id="sensor_fans_time_off" name="sensor_fans_time_off" step="3600" value="06:00">
                </div>
                <hr>
            </div>
            <hr>
            <div class="row">
                <div class="col-sm-6">
                    <h4>  Red LED GPIO:</h4>
                    <select id="red_gpio" name="red_gpio">
                        <option value="20">20 (default)</option>
                        <option value="25">25 (dev)</option>
                    </select>
                    <h4>Intensity (0%-100%):</h4>
                   <input id="int_red" name="int_red" type="number" value="20" min="0" max="100" step="1">
                </div>
                <div class="col-sm-2">
                      &nbsp;ON
                    <input type="time" id="red_time_on" name="red_time_on" step="3600" value="06:00"> OFF:
                    <input type="time" id="red_time_off" name="red_time_off" step="3600" value="20:00">
                </div>
            </div>
            <hr>

            <div class="row">
                <div class="col-sm-6">
                    <h4>  Blue LED GPIO:</h4>

                    <select id="blue_gpio" name="blue_gpio">
                        <option value="21">21 (default)</option>
                        <option value="24">24 (dev)</option>
                    </select>
                    <h4>Intensity (0%-100%):</h4>
                   <input id="int_blue" name="int_blue" type="number" value="10" min="0" max="100" step="1">
                </div>
                <div class="col-sm-2">
                      &nbsp;ON
                    <input type="time" id="blue_time_on" name="blue_time_on" step="3600" value="06:00"> OFF:
                    <input type="time" id="blue_time_off" name="blue_time_off" step="3600" value="20:00">
                </div>

            </div>
            <hr>
            <div class="row">
                <div class="col-sm-6">
                    <h4>  Farred GPIO:</h4>
                    <select id="farred_gpio" name="farred_gpio">
                        <option value="18">18 (default)</option>
                    </select>
                    <h4>Intensity (0%-100%):</h4>
                   <input id="int_farred" name="int_farred" type="number" value="20" min="0" max="100" step="1">
                </div>
                <div class="col-sm-2">
                      &nbsp;ON
                    <input type="time" id="farred_time_on" name="farred_time_on" step="3600" value="19:00">
                    OFF:
                    <input type="time" id="farred_time_off" name="farred_time_off" step="3600" value="20:00">
                </div>

            </div>

        </div>
        <button name="name" value="value" class="wifiConnectButton" type="submit">Submit</button>
    </form>
    <p>After clicking the finish button, your device will reboot and your system should be setup soon.</p>
</div>

<script>


    $(function() {
        $("#dvActuator").hide();
        $("#chkControl").click(function() {
            if ($(this).is(":checked")) {
                $("#dvActuator").show();

            } else {
                $("#dvActuator").hide();

            }
        });
    });

    var data = {}
    $.getJSON("{{ url_for('static', filename='data/tz_formatted.json') }}", function(json) {
    data = json;
});
    for (item in data) {
        data[item].unshift([undefined, "Please select option"])
    }

    $("#first-choice").change(function() {
        var first = $(this),
            second = $("#second-choice"),
            html = [];
        $.each(data[first.val()], function(i, val) {
            html.push('<option>' + val[1] + '</option>')
        });
        second.html(html.join());
        $("#second-choice").attr("style", "visibility: visible;");
    });
</script>
{% endblock %}