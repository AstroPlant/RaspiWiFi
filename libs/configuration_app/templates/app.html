{% extends 'layout.html' %}

{% block body %}
  <div id="mainContent">
    <div id="wpaStatus">
      <ul>
        {% if config_hash['wpa_enabled'] == '1': %}
          <li><a href="{{ url_for('wpa_settings') }}">Config. Mode WPA: ENABLED</a></li>
          <li><a href="{{ url_for('wpa_settings') }}">Key: {{ config_hash['wpa_key'] }}</a></li>
        {% endif %}

        {% if config_hash['wpa_enabled'] == '0': %}
          <li><a href="{{ url_for('wpa_settings') }}">Config. Mode WPA: DISABLED</a></li>
      {% endif %}
      </ul>
    </div>

    <h1>AP WiFi Setup</h1>
    <div class="wifiIcon"></div>
    <div><label for="info">{{ info }}</label></div>

    <form action="{{ url_for('save_credentials') }}" method=post>
      <ul>
        <li><label for="ssid">Select your WiFi network</label></li>

        <li class="wifiNetwork">
          <select id="ssid" name="ssid", class="wifiNetworkInputs">
            {% for ssid in wifi_ap_array %}
              <option value='{{ ssid }}'>{{ ssid }}</option>
            {% endfor %}
          </select>
        </li>

        <li><a href="{{ url_for('manual_ssid_entry') }}" class="manualSSIDEntry">manual SSID entry -></a></li>
        <li><a href="{{ url_for('enterprise_entry') }}" class="manualSSIDEntry">enterprise (eduroam) entry -></a></li>
        <li><label for="wifi_key">Your Wifi password</label></li>
        <li><input type="password" name="wifi_key", class="wifiNetworkInputs"></li>
        <li><label for="api_url">Your API url</label></li>
        <li><input type="text" name="api_url" value="https://my.astroplant.io/api/", class="wifiNetworkInputs" required></li>
        <li><label for="mqtt_host">The MQTT host</label></li>
        <li><input type="text" name="mqtt_host" value="mqtt.astroplant.sda-projects.nl" class="wifiNetworkInputs" required></li>
        <li><label for="mqtt_port">The MQTT host</label></li>
        <li><input type="text" name="mqtt_port" value="9998" class="wifiNetworkInputs" required></li>
        <li><label for="auth_serial">Your AstroPlant kit's serial</label></li>
        <li><input type="text" name="auth_serial", class="wifiNetworkInputs" required></li>
        <li><label for="auth_secret">Your AstroPlant kit's secret</label></li>
        <li><input type="text" name="auth_secret", class="wifiNetworkInputs" required></li>
        <li><label for="checkbox">Is the AstroPlant LCD screen connected?</label><input type="checkbox" name="i2c_check" onclick="var input = document.getElementById('lcd_address'); if(this.checked){ input.disabled = false; input.focus();}else{input.disabled=true;}" /></li>
        <li><label for="I2C_address">LCD I2C address (default value is 0x27):</label><input type="text" id="lcd_address" name="lcd_address" disabled="disabled", class="lcdInputs"/></li>

        <input type="submit", class="wifiConnectButton">
      </ul>
    </form>
  </div>
{% endblock %}
